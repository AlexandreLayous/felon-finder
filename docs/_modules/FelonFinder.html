<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FelonFinder &mdash; Felon Finder 0.5 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=db78e746"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Felon Finder
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Quick start</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../quickstartguide.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usingthesoftware.html">Using the software</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../modules.html">Modules</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../contact.html">Contact</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Felon Finder</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Module code</a></li>
      <li class="breadcrumb-item active">FelonFinder</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for FelonFinder</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">tkinter</span> <span class="k">as</span> <span class="nn">tk</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">messagebox</span>
<span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="n">filedialog</span>
<span class="kn">import</span> <span class="nn">webbrowser</span>
<span class="kn">import</span> <span class="nn">customtkinter</span> <span class="k">as</span> <span class="nn">ctk</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">ImageTk</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">configparser</span> <span class="kn">import</span> <span class="n">ConfigParser</span>
<span class="kn">import</span> <span class="nn">pooch</span>

<span class="c1">#https://stackoverflow.com/questions/31836104/pyinstaller-and-onefile-how-to-include-an-image-in-the-exe-file</span>
<div class="viewcode-block" id="resource_path">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.resource_path">[docs]</a>
<span class="k">def</span> <span class="nf">resource_path</span><span class="p">(</span><span class="n">relative_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function wraps a relative path with dirname to help with the assets.</span>

<span class="sd">    Args:</span>
<span class="sd">        relative_path: Relative os.path-like path from the root of the project</span>

<span class="sd">    Returns:</span>
<span class="sd">        The wrapped path for a relative file or folder.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">base_path</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">_MEIPASS2</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="n">base_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">base_path</span><span class="p">,</span> <span class="n">relative_path</span><span class="p">)</span></div>


<div class="viewcode-block" id="SplashScreen">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.SplashScreen">[docs]</a>
<span class="k">class</span> <span class="nc">SplashScreen</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class contains the splash screen for the project and the loading for the main window.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Felon Finder - Chargement&quot;</span><span class="p">)</span>
        <span class="n">splash_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">())</span>
        <span class="n">splash_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">())</span>
        <span class="n">center_window_on_screen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">splash_width</span><span class="p">,</span> <span class="n">splash_height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">overrideredirect</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">barFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;FELON FINDER - Débusque ton agresseur&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">70</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Chargement en cours...&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">barFrame</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">splash_width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">splash_height</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">barFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">loading</span><span class="p">()</span>

<div class="viewcode-block" id="SplashScreen.loading">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.SplashScreen.loading">[docs]</a>
    <span class="k">def</span> <span class="nf">loading</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function loads the time and resource consuming for the main program before showing the main window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Chargement des librairies... Librairie 1/2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="kn">from</span> <span class="nn">varencoder</span> <span class="kn">import</span> <span class="n">VAE</span><span class="p">,</span> <span class="n">encoder_create</span><span class="p">,</span> <span class="n">decoder_create</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Chargement de l&#39;auto-encodeur...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">0.7</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="n">POOCH</span> <span class="o">=</span> <span class="n">pooch</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="c1"># Use the default cache folder for the OS</span>
            <span class="n">path</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="s1">&#39;saved_model&#39;</span><span class="p">)),</span>
            <span class="c1"># The remote data is on Github</span>
            <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://zenodo.org/records/10957695/files/felon_finder_vae.weights.h5?download=1&quot;</span><span class="p">,</span>
            <span class="c1"># The registry specifies the files that can be fetched</span>
            <span class="n">registry</span><span class="o">=</span><span class="p">{</span>
                <span class="c1"># The registry is a dict with file names and their SHA256 hashes</span>
                <span class="s2">&quot;felon_finder_vae.weights.h5&quot;</span><span class="p">:</span> <span class="s2">&quot;38595de4ea78d8a1ba21f7b1a3a3b3c7c1c4c862bf3b290c5cd9d2ebaccc16fa&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">)</span>

        <span class="n">vae_weights</span> <span class="o">=</span> <span class="n">POOCH</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="s2">&quot;felon_finder_vae.weights.h5&quot;</span><span class="p">)</span>

        <span class="k">global</span> <span class="n">vae</span>
        <span class="n">vae</span> <span class="o">=</span> <span class="n">VAE</span><span class="p">(</span><span class="n">encoder_create</span><span class="p">(),</span> <span class="n">decoder_create</span><span class="p">())</span>
        <span class="n">vae</span><span class="o">.</span><span class="n">load_weights</span><span class="p">(</span><span class="n">vae_weights</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Lancement de Felon Finder...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)))</span>

        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;dark_mode&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="s2">&quot;dark-blue&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;light&quot;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>

        <span class="n">root</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTk</span><span class="p">()</span>

        <span class="k">global</span> <span class="n">main_width</span>
        <span class="k">global</span> <span class="n">main_height</span>

        <span class="n">main_width</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="n">root</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">())</span>
        <span class="n">main_height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="o">*</span><span class="n">root</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">())</span>
        <span class="n">center_window_on_screen</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">main_width</span><span class="p">,</span> <span class="n">main_height</span><span class="p">)</span>

        <span class="n">on_closing</span> <span class="o">=</span> <span class="n">create_root_closing_handler</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="n">root</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">on_closing</span><span class="p">)</span>

        <span class="n">MainScreen</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
        <span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>
</div>


<div class="viewcode-block" id="MainScreen">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen">[docs]</a>
<span class="k">class</span> <span class="nc">MainScreen</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class contains the main window of the program.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialization of the window with all the pictures of the database and the main buttons.</span>

<span class="sd">        Args:</span>
<span class="sd">            master: Customtkinter main window</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_images</span> <span class="o">=</span> <span class="mi">12</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span> <span class="o">=</span> <span class="mi">4</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Felon Finder - Fenêtre principale&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mi">1024</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkScrollableFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">main_width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">main_height</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame3</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">main_width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">main_height</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">pack_propagate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame3</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;FELON FINDER - Débusque ton agresseur&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">titleLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel1</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Sélectionnez une image...&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">22</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel2</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Aucune image sélectionnée&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel2</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">path_img</span> <span class="o">=</span> <span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_img</span><span class="p">,</span> <span class="s1">&#39;faces&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span><span class="p">,</span><span class="n">filename</span><span class="p">))),</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span><span class="p">,</span><span class="n">filename</span><span class="p">))),</span> <span class="p">(</span><span class="mi">250</span><span class="p">,</span> <span class="mi">250</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">]):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span> <span class="n">img</span><span class="o">=</span><span class="n">image</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">image</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_images_list</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">shuffleButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Nouvelles photos&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_random_images</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shuffleButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">validationButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Valider&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_validation</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refreshButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Rafraîchir&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">saveButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Enregistrer&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_images</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">backButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Photos précédentes&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">back_to_last_images</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">ref_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">middleFrame3</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Photos de référence&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ref_label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">columnspan</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">unknown</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_img</span><span class="p">,</span><span class="s1">&#39;unknown.png&#39;</span><span class="p">)),</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_img</span><span class="p">,</span><span class="s1">&#39;unknown.png&#39;</span><span class="p">)),</span> <span class="p">(</span><span class="mi">125</span><span class="p">,</span> <span class="mi">125</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unknown_pics</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">):</span>
            <span class="n">label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">middleFrame3</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unknown</span><span class="p">)</span>
            <span class="n">label</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">column</span> <span class="o">=</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">unknown_pics</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">show_combobox</span><span class="p">()</span>
            
        <span class="bp">self</span><span class="o">.</span><span class="n">filterButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Créer un filtre&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterwindow</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionsButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Paramètres&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options_window</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionsButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tutorialButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Ouvrir le tutoriel&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tutorial_window</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tutorialButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quitButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Quitter le programme&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_window</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quitButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">mainFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame3</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span> <span class="o">=</span> <span class="kc">None</span>
    
<div class="viewcode-block" id="MainScreen.show_combobox">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.show_combobox">[docs]</a>
    <span class="k">def</span> <span class="nf">show_combobox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function shows the drop down list for filter selection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_file_path</span> <span class="o">=</span> <span class="n">resource_path</span><span class="p">(</span><span class="s1">&#39;saved_filters&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FilterList</span> <span class="o">=</span><span class="p">[</span><span class="s2">&quot;None&quot;</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_file_path</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SelectFilter</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">FilterList</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SelectFilter</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">50</span><span class="p">)</span></div>

        
<div class="viewcode-block" id="MainScreen.filterwindow">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.filterwindow">[docs]</a>
    <span class="k">def</span> <span class="nf">filterwindow</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function launches the filter window or shows it if it was behind.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span><span class="o">.</span><span class="n">winfo_exists</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span><span class="o">.</span><span class="n">focus</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span><span class="p">)</span> <span class="c1"># c&#39;est quoi self.app ??</span>
            <span class="c1">#self.master.wait_window(self.filterWindow)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">udpate_combobox</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">filterWindow</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span></div>

            
<div class="viewcode-block" id="MainScreen.udpate_combobox">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.udpate_combobox">[docs]</a>
    <span class="k">def</span> <span class="nf">udpate_combobox</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function refreshes the filters drop down list once the filter menu is closed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_file_path</span> <span class="o">=</span> <span class="n">resource_path</span><span class="p">(</span><span class="s1">&#39;saved_filters&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">FilterList</span> <span class="o">=</span><span class="p">[</span><span class="s2">&quot;None&quot;</span><span class="p">]</span><span class="o">+</span><span class="p">[</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_file_path</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">SelectFilter</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">values</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">FilterList</span><span class="p">)</span>
        <span class="k">return</span></div>


<div class="viewcode-block" id="MainScreen.options_window">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.options_window">[docs]</a>
    <span class="k">def</span> <span class="nf">options_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function launches the options window or shows it if it was behind.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span><span class="o">.</span><span class="n">winfo_exists</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span><span class="o">.</span><span class="n">focus</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Options</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">optionsWindow</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainScreen.tutorial_window">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.tutorial_window">[docs]</a>
    <span class="k">def</span> <span class="nf">tutorial_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function launches the tutorial window or shows it if it was behind.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span><span class="o">.</span><span class="n">winfo_exists</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkToplevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span><span class="o">.</span><span class="n">focus</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">app</span> <span class="o">=</span> <span class="n">Tutorial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">tutorialWindow</span><span class="o">.</span><span class="n">focus</span><span class="p">()</span></div>


<div class="viewcode-block" id="MainScreen.close_window">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.close_window">[docs]</a>
    <span class="k">def</span> <span class="nf">close_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function asks for the user&#39;s confirmation to close the program.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">askokcancel</span><span class="p">(</span><span class="s2">&quot;Fermeture&quot;</span><span class="p">,</span> <span class="s2">&quot;Vous allez fermer le programme. Continuer ?&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="MainScreen.get_random_images">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.get_random_images">[docs]</a>
    <span class="k">def</span> <span class="nf">get_random_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function gets random pictures from the database after the user clicked on &quot;Nouvelles photos&quot;</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">random_images</span> <span class="o">=</span> <span class="nb">dict</span><span class="o">.</span><span class="n">fromkeys</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">i</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">random_images</span><span class="p">)</span>
        
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">random_images</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">:</span>
            <span class="n">random_image</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">random_image</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">random_images</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_image_to_showed_list</span><span class="p">(</span><span class="n">random_image</span><span class="p">)</span>
                <span class="n">random_images</span><span class="p">[</span><span class="n">random_image</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="n">random_images_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">random_images</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">:</span><span class="mi">2</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">update_images</span><span class="p">(</span><span class="n">random_images_list</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">reset_ref</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="MainScreen.save_images">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.save_images">[docs]</a>
    <span class="k">def</span> <span class="nf">save_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function saves the selected pictures in the selected path if it exists, else asks what path to choose.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)))</span>

        <span class="k">if</span> <span class="s1">&#39;saved_images_path&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">]:</span>
            <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Information&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;C&#39;est la première fois que vous enregistrez des images.</span><span class="se">\n\n</span><span class="s2">Choisissez le dossier dans lequel vous voulez que vos images soient sauvegardées à l&#39;avenir.&quot;</span><span class="p">)</span>
            <span class="n">given_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askdirectory</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">given_path</span> <span class="o">!=</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="n">given_path</span> <span class="o">!=</span> <span class="s2">&quot;Aucun chemin sélectionné&quot;</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;saved_images_path&#39;</span><span class="p">,</span> <span class="n">given_path</span><span class="p">)</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">conf</span><span class="p">:</span>
                    <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
                <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showerror</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Erreur&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Vous n&#39;avez choisi aucun chemin, pas d&#39;enregistrement.</span><span class="se">\n</span><span class="s2">Songez à en choisir un correct ici ou dans les paramètres.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
        
        <span class="n">path</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;saved_images_path&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">existing_path</span> <span class="o">=</span> <span class="n">path</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">existing_path</span> <span class="o">=</span> <span class="n">path</span>
        
        <span class="n">existing_images</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">existing_path</span><span class="p">))</span>

        <span class="n">existing_numbers</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">])</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">existing_images</span> <span class="k">if</span> <span class="n">f</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;image_&#39;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="n">existing_numbers</span><span class="p">:</span>
            <span class="n">initial_i</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">existing_numbers</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">initial_i</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">saved_images_filenames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">selected</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">_image</span><span class="o">.</span><span class="n">_dark_image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">existing_path</span><span class="p">,</span><span class="sa">f</span><span class="s1">&#39;image_</span><span class="si">{</span><span class="n">initial_i</span><span class="o">+</span><span class="n">i</span><span class="si">}</span><span class="s1">.jpg&#39;</span><span class="p">)))</span>
                <span class="n">saved_images_filenames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;image_</span><span class="si">{</span><span class="n">initial_i</span><span class="o">+</span><span class="n">i</span><span class="si">}</span><span class="s2">.jpg&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Enregistré&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;L&#39;image a été enregistrée dans le dossier </span><span class="si">{</span><span class="n">existing_path</span><span class="si">}</span><span class="s2"> au nom:</span><span class="se">\n\n</span><span class="s2">- </span><span class="si">{</span><span class="n">saved_images_filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">- &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">saved_images_filenames</span><span class="p">]</span>
            <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Enregistré&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Les images suivantes ont été enregistrées dans le dossier </span><span class="si">{</span><span class="n">existing_path</span><span class="si">}</span><span class="s2">:</span><span class="se">\n</span><span class="si">{</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">files</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="MainScreen.update_images">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.update_images">[docs]</a>
    <span class="k">def</span> <span class="nf">update_images</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">images_list</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function updates the showed images to keep track of the images in the main buttons.</span>

<span class="sd">        Args:</span>
<span class="sd">            images_list: An array of the new images to show</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="n">images_list</span><span class="p">:</span>
            <span class="n">button</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">middleFrame</span><span class="p">,</span>
                <span class="n">text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">,</span>
                <span class="n">command</span><span class="o">=</span><span class="k">lambda</span> <span class="n">img</span><span class="o">=</span><span class="n">image</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">select_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
            <span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
            <span class="n">button</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">button</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">image</span><span class="p">]</span> <span class="o">=</span> <span class="n">button</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_label</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="MainScreen.select_image">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.select_image">[docs]</a>
    <span class="k">def</span> <span class="nf">select_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function turns the buttons red or blue and their hover color to darker red or darker blue according to if they were selected or un-selected by the user.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: The selected image</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">image</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">button</span><span class="o">.</span><span class="n">selected</span><span class="p">:</span>
            <span class="n">button</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">hover_color</span> <span class="o">=</span> <span class="s1">&#39;darkred&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">button</span><span class="o">.</span><span class="n">selected</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">button</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">,</span> <span class="n">hover_color</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span><span class="o">.</span><span class="n">_hover_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_label</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="MainScreen.update_label">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.update_label">[docs]</a>
    <span class="k">def</span> <span class="nf">update_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function updates the labels to keep the user aware of the amount of images selected and help them choose their next action. </span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">cpt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">selected</span><span class="p">:</span>
                <span class="n">cpt</span><span class="o">+=</span><span class="mi">1</span>
        <span class="k">if</span> <span class="n">cpt</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel1</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Sélectionnez une image...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel2</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Aucune image sélectionnée&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validationButton</span><span class="o">.</span><span class="n">forget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saveButton</span><span class="o">.</span><span class="n">forget</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">selected_images_list</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refreshButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">25</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refreshButton</span><span class="o">.</span><span class="n">forget</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">cpt</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel1</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Vous pouvez valider cette image ou en sélectionner plus...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel2</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;1 image sélectionnée&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">validationButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">25</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">saveButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">25</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refreshButton</span><span class="o">.</span><span class="n">forget</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel1</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Validez votre choix pour combiner les visages...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">subtitleLabel2</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">cpt</span><span class="si">}</span><span class="s2"> images sélectionnées&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="MainScreen.check_validation">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.check_validation">[docs]</a>
    <span class="k">def</span> <span class="nf">check_validation</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function applies the VAE and the genetic algorithm to the selected images and shows the decoded results in the buttons. The selected images are then kept in reference.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#Bad practice: importing at each validation</span>
        <span class="c1">#But for some reason it stucks the loading if we import above</span>
        <span class="kn">from</span> <span class="nn">algogen</span> <span class="kn">import</span> <span class="n">one_selection</span><span class="p">,</span> <span class="n">two_selections</span><span class="p">,</span> <span class="n">multiple_selections</span>
        <span class="kn">from</span> <span class="nn">tensorflow.keras.utils</span> <span class="kn">import</span> <span class="n">array_to_img</span> <span class="c1"># type: ignore</span>

        <span class="n">cpt</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">arrays</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selected_images_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">selected</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">select_image</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
                <span class="n">arrays</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">_image</span><span class="o">.</span><span class="n">_dark_image</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">)))</span><span class="o">/</span><span class="mi">255</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected_images_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">_image</span><span class="o">.</span><span class="n">_dark_image</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">)))</span><span class="o">/</span><span class="mi">255</span><span class="p">)</span>
                <span class="n">ctk_img</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">_image</span><span class="o">.</span><span class="n">_dark_image</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">_image</span><span class="o">.</span><span class="n">_dark_image</span><span class="p">,</span> <span class="p">(</span><span class="mi">125</span><span class="p">,</span> <span class="mi">125</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unknown_pics</span><span class="p">[</span><span class="n">cpt</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="n">ctk_img</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">unknown_pics</span><span class="p">[</span><span class="n">cpt</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unknown</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">))</span>
            <span class="n">cpt</span> <span class="o">+=</span> <span class="mi">1</span>
        
        <span class="n">cpt</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">x_encoded</span> <span class="o">=</span> <span class="n">vae</span><span class="o">.</span><span class="n">encoder</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">arrays</span><span class="p">))</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_encoded</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)))</span>

            <span class="n">x_encoded</span> <span class="o">=</span> <span class="n">one_selection</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">]),</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x_encoded</span> <span class="o">=</span> <span class="n">two_selections</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_encoded</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x_encoded</span> <span class="o">=</span> <span class="n">multiple_selections</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SelectFilter</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
            <span class="n">x_decoded</span> <span class="o">=</span> <span class="n">vae</span><span class="o">.</span><span class="n">decoder</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">)</span>
            <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">array_to_img</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_decoded</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># apply the filter </span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FilterToApply</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;saved_filters&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SelectFilter</span><span class="o">.</span><span class="n">get</span><span class="p">()))))</span>
            <span class="n">x_decoded</span><span class="o">=</span><span class="n">vae</span><span class="o">.</span><span class="n">decoder</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x_encoded</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">FilterToApply</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">))]))</span>
            <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">array_to_img</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_decoded</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cpt</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">):</span>
                <span class="n">ctk_img</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="n">cpt</span><span class="p">],</span> <span class="n">images</span><span class="p">[</span><span class="n">cpt</span><span class="p">],</span> <span class="n">img</span><span class="o">.</span><span class="n">_size</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="n">ctk_img</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
                <span class="n">cpt</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_image_to_showed_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">_image</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">update_label</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="MainScreen.refresh">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.refresh">[docs]</a>
    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function applies again the VAE and the genetic algorithm to the previously selected and treated images and shows the decoded results in the buttons. The selected images are still kept in reference.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#Bad practice: importing at each refresh</span>
        <span class="c1">#But for some reason it stucks the loading if we import above</span>
        <span class="kn">from</span> <span class="nn">algogen</span> <span class="kn">import</span> <span class="n">one_selection</span><span class="p">,</span> <span class="n">two_selections</span><span class="p">,</span> <span class="n">multiple_selections</span>
        <span class="kn">from</span> <span class="nn">tensorflow.keras.utils</span> <span class="kn">import</span> <span class="n">array_to_img</span> <span class="c1"># type: ignore</span>

        <span class="n">cpt</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">x_encoded</span> <span class="o">=</span> <span class="n">vae</span><span class="o">.</span><span class="n">encoder</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selected_images_list</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_encoded</span> <span class="o">==</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
            <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)))</span>

            <span class="n">x_encoded</span> <span class="o">=</span> <span class="n">one_selection</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">std</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">]),</span> <span class="n">m</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]))</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">x_encoded</span> <span class="o">=</span> <span class="n">two_selections</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">x_encoded</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x_encoded</span> <span class="o">=</span> <span class="n">multiple_selections</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">)</span>
        
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">SelectFilter</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;None&quot;</span><span class="p">:</span>
            <span class="n">x_decoded</span> <span class="o">=</span> <span class="n">vae</span><span class="o">.</span><span class="n">decoder</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">)</span>
            <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">array_to_img</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_decoded</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span> <span class="c1"># apply the filter </span>
            <span class="bp">self</span><span class="o">.</span><span class="n">FilterToApply</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;saved_filters&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">SelectFilter</span><span class="o">.</span><span class="n">get</span><span class="p">()))))</span>
            <span class="n">x_decoded</span><span class="o">=</span><span class="n">vae</span><span class="o">.</span><span class="n">decoder</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">x_encoded</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">FilterToApply</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">))]))</span>
            <span class="n">images</span> <span class="o">=</span> <span class="p">[</span><span class="n">array_to_img</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_decoded</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">cpt</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">images</span><span class="p">):</span>
                <span class="n">ctk_img</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="n">cpt</span><span class="p">],</span> <span class="n">images</span><span class="p">[</span><span class="n">cpt</span><span class="p">],</span> <span class="n">img</span><span class="o">.</span><span class="n">_size</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="n">ctk_img</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
                <span class="n">cpt</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_image_to_showed_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">_image</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="MainScreen.add_image_to_showed_list">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.add_image_to_showed_list">[docs]</a>
    <span class="k">def</span> <span class="nf">add_image_to_showed_list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function keeps the given image in memory through an array.</span>

<span class="sd">        Args:</span>
<span class="sd">            image: Image to keep in memory</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">25</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="MainScreen.back_to_last_images">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.back_to_last_images">[docs]</a>
    <span class="k">def</span> <span class="nf">back_to_last_images</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function removes the last showed images and changes the buttons to make them show to the ones before that. The reference list is also emptied.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_images</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">:])</span>
        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">backButton</span><span class="o">.</span><span class="n">forget</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">reset_ref</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="MainScreen.reset_ref">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.MainScreen.reset_ref">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_ref</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function clears the reference images array and puts back unknown.png faces in the reference labels.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">lab</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">unknown_pics</span><span class="p">:</span>
                <span class="n">lab</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unknown</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selected_images_list</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">update_label</span><span class="p">()</span></div>
</div>


<div class="viewcode-block" id="Filter">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter">[docs]</a>
<span class="k">class</span> <span class="nc">Filter</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class contains the filter menu of the program. Once it is launched, the main window of the program is disabled to avoid mistakes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialization of the filter menu.</span>

<span class="sd">        Args:</span>
<span class="sd">            master: Customtkinter filter window</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">attributes</span><span class="p">(</span><span class="s2">&quot;-topmost&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Créer un filtre&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="n">main_width</span>
        <span class="n">height</span> <span class="o">=</span> <span class="n">main_height</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="n">center_window_on_screen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">main_height</span><span class="o">-</span><span class="mi">300</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack_propagate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack_propagate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">_current_height</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack_propagate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">labeletape1</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Choisir le nombre d&#39;étapes:&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;transparent&quot;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span> <span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labeletape1</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labeletape2</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;5&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labeletape2</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slidervaluelist</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">11</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slideretapes</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkSlider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">from_</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slidervaluelist</span><span class="p">),</span> <span class="n">to</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slidervaluelist</span><span class="p">),</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">valueslideretapes</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newvalue</span> <span class="o">=</span> <span class="mi">5</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slideretapes</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">filterStartButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;Démarrer&#39;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">create_filter</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterStartButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">NButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Quitter&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_window</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">wait_visibility</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">grab_set</span><span class="p">()</span>
        
<div class="viewcode-block" id="Filter.create_filter">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.create_filter">[docs]</a>
    <span class="k">def</span> <span class="nf">create_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function creates the initial filter menu.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slideretapes</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">hover</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">state</span><span class="o">=</span><span class="s2">&quot;disabled&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">filterStartButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">hover</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">filter_file_path</span> <span class="o">=</span> <span class="n">resource_path</span><span class="p">(</span><span class="s1">&#39;saved_filters&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">number_of_available_filter</span> <span class="o">=</span> <span class="nb">len</span><span class="p">([</span><span class="n">name</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_file_path</span><span class="p">)])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">list_difference_vector</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_step</span><span class="o">=</span><span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_which_step</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_imgs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_selection_menu</span><span class="p">()</span>

        <span class="k">return</span></div>

    
<div class="viewcode-block" id="Filter.show_which_step">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.show_which_step">[docs]</a>
    <span class="k">def</span> <span class="nf">show_which_step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function keeps the user aware of the current step of filter creation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_step_widget</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">etapeLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Etape &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_step</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39; sur &#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">newvalue</span><span class="p">)),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;transparent&quot;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">etapeLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_step_widget</span><span class="p">[</span><span class="s2">&quot;etapeLabel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">etapeLabel</span> 
        <span class="bp">self</span><span class="o">.</span><span class="n">explanationLabel</span> <span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s1">&#39;Choisissez une image ressemblante et une image non ressemblante&#39;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;transparent&quot;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">explanationLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">current_step_widget</span><span class="p">[</span><span class="s2">&quot;explanationLabel&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">explanationLabel</span> 
        <span class="k">return</span></div>

    
<div class="viewcode-block" id="Filter.show_selection_menu">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.show_selection_menu">[docs]</a>
    <span class="k">def</span> <span class="nf">show_selection_menu</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function creates the buttons used to create the filters with the selected images.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="o">=</span><span class="p">{}</span>
        <span class="n">list_img_nbr</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span><span class="o">+</span><span class="mi">2</span><span class="p">)]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LabelImageRessemblante</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Numéro de l&#39;image ressemblante&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;transparent&quot;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LabelImageRessemblante</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="s2">&quot;LabelImageRessemblante&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">LabelImageRessemblante</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImageRessemblante</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">list_img_nbr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImageRessemblante</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImageRessemblante</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="s2">&quot;ComboBoxImageRessemblante&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImageRessemblante</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NoneImageRessemblante</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Aucune image&quot;</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">no_image_selected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NoneImageRessemblante</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="s2">&quot;NoneImageRessemblante&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">NoneImageRessemblante</span>
                    
        <span class="bp">self</span><span class="o">.</span><span class="n">LabelImagePASRessemblante</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Numéro de l&#39;image pas ressemblante&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;transparent&quot;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">LabelImagePASRessemblante</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="s2">&quot;LabelImagePASRessemblante&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">LabelImagePASRessemblante</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImagePASRessemblante</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkComboBox</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">values</span><span class="o">=</span><span class="n">list_img_nbr</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImagePASRessemblante</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;1&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImagePASRessemblante</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="s2">&quot;ComboBoxImagePASRessemblante&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImagePASRessemblante</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NoneImagePASRessemblante</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Aucune image&quot;</span><span class="p">,</span><span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">no_image_selected</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NoneImagePASRessemblante</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="s2">&quot;NoneImagePASRessemblante&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">NoneImagePASRessemblante</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ValidateStep</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Valider etape &quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_step</span><span class="p">),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">new_step</span><span class="p">,</span> <span class="n">fg_color</span><span class="o">=</span> <span class="s2">&quot;lime green&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ValidateStep</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="s2">&quot;ValidateStep&quot;</span><span class="p">]</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">ValidateStep</span>
        <span class="k">return</span></div>

    
<div class="viewcode-block" id="Filter.show_imgs">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.show_imgs">[docs]</a>
    <span class="k">def</span> <span class="nf">show_imgs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function shows the images usable to create the filter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">resource_path</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path</span><span class="p">,</span><span class="s1">&#39;faces&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">images</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">numpyimages</span> <span class="o">=</span> <span class="p">[]</span>
        
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span><span class="p">,</span><span class="n">filename</span><span class="p">)),</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span><span class="p">,</span><span class="n">filename</span><span class="p">)),</span> <span class="p">(</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">)))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">numpyimages</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">path_celeba</span><span class="p">,</span><span class="n">filename</span><span class="p">)))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">500</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">numero_de_limage</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="kn">from</span> <span class="nn">tensorflow.keras.utils</span> <span class="kn">import</span> <span class="n">array_to_img</span> <span class="c1"># type: ignore</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">dic_of_imgs</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">)</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n_showed_images</span> <span class="o">+</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">random_image1</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">images</span><span class="p">)</span>
            <span class="n">random_numpy_image</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">numpyimages</span><span class="p">)</span>
            <span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">random_img_encoded</span> <span class="o">=</span> <span class="n">vae</span><span class="o">.</span><span class="n">encoder</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random_numpy_image</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">)))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;float32&quot;</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span><span class="p">]))</span>
            <span class="n">random_img_decoded</span> <span class="o">=</span> <span class="n">vae</span><span class="o">.</span><span class="n">decoder</span><span class="p">(</span><span class="n">random_img_encoded</span><span class="p">)</span>
            <span class="n">images_to_select</span> <span class="o">=</span> <span class="p">[</span><span class="n">array_to_img</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">random_img_decoded</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">random_image1</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
                <span class="n">numero_de_limage</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">showed_images_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random_image1</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">my_image</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="n">light_image</span><span class="o">=</span><span class="n">images_to_select</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                  <span class="n">dark_image</span><span class="o">=</span><span class="n">images_to_select</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                                  <span class="n">size</span><span class="o">=</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">my_image_label</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">numero_de_limage</span><span class="p">),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;Helvetica&#39;</span><span class="p">,</span><span class="mi">35</span><span class="p">),</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">my_image</span><span class="p">,</span> <span class="n">compound</span><span class="o">=</span><span class="s2">&quot;bottom&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">my_image_label</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">random_image1</span><span class="p">]</span> <span class="o">=</span>  <span class="bp">self</span><span class="o">.</span><span class="n">my_image_label</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">dic_of_imgs</span><span class="p">[</span><span class="n">numero_de_limage</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">random_numpy_image</span><span class="o">.</span><span class="n">resize</span><span class="p">((</span><span class="mi">64</span><span class="p">,</span> <span class="mi">64</span><span class="p">)))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;float32&quot;</span><span class="p">)</span><span class="o">/</span><span class="mi">255</span>
        <span class="k">return</span></div>

    
<div class="viewcode-block" id="Filter.no_image_selected">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.no_image_selected">[docs]</a>
    <span class="k">def</span> <span class="nf">no_image_selected</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function refreshes the proposed images when the user presses the &quot;Aucune image&quot; button.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="n">widget</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_imgs</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">show_selection_menu</span><span class="p">()</span>
        <span class="k">return</span></div>

    
<div class="viewcode-block" id="Filter.new_step">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.new_step">[docs]</a>
    <span class="k">def</span> <span class="nf">new_step</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function creates again the selection menu for each new step of the filter creation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_step</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">newvalue</span><span class="p">:</span>
            <span class="n">img_PAS_ressemblante</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic_of_imgs</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImagePASRessemblante</span><span class="o">.</span><span class="n">get</span><span class="p">())]</span>
            <span class="n">img_ressemblante</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dic_of_imgs</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ComboBoxImageRessemblante</span><span class="o">.</span><span class="n">get</span><span class="p">())]</span>
            
            <span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">x_encoded</span> <span class="o">=</span> <span class="n">vae</span><span class="o">.</span><span class="n">encoder</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">img_ressemblante</span><span class="p">,</span><span class="n">img_PAS_ressemblante</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">list_difference_vector</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">x_encoded</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">x_encoded</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">current_step</span><span class="o">+=</span><span class="mi">1</span>
            
            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="n">widget</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_step_widget</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_step_widget</span><span class="p">[</span><span class="n">text</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_which_step</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_imgs</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">show_selection_menu</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">mean_difference_vector</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">list_difference_vector</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">np</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">filter_file_path</span><span class="p">,</span><span class="s1">&#39;filter&#39;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">number_of_available_filter</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;.npy&#39;</span><span class="p">),</span> <span class="bp">self</span><span class="o">.</span><span class="n">mean_difference_vector</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">img</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buttons</span><span class="p">[</span><span class="n">img</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">selection_menu_widgets</span><span class="p">[</span><span class="n">widget</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">text</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_step_widget</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_step_widget</span><span class="p">[</span><span class="n">text</span><span class="p">]</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LabelImagePASRessemblante</span><span class="o">=</span><span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">lowerframe</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Le filtre a été créé, retournez sur la page principale en cliquant &#39;Quitter&#39;&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">),</span> <span class="n">fg_color</span><span class="o">=</span><span class="s2">&quot;transparent&quot;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">LabelImagePASRessemblante</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="k">return</span></div>


    <span class="k">def</span> <span class="nf">close_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function closes the window and makes the main window usable again.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">grab_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
    
<div class="viewcode-block" id="Filter.valueslideretapes">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.valueslideretapes">[docs]</a>
    <span class="k">def</span> <span class="nf">valueslideretapes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function forces the slider to show only integer values.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: Value of the slider</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">newvalue</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slidervaluelist</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="nb">abs</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labeletape2</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">newvalue</span><span class="p">)</span></div>


<div class="viewcode-block" id="Filter.close_window">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Filter.close_window">[docs]</a>
    <span class="k">def</span> <span class="nf">close_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function closes the window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>
</div>


<div class="viewcode-block" id="Options">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options">[docs]</a>
<span class="k">class</span> <span class="nc">Options</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class contains the options menu of the program. Once it is launched, the main window of the program is disabled to avoid mistakes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">attributes</span><span class="p">(</span><span class="s2">&quot;-topmost&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Paramètres&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">250</span>
        <span class="n">height</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="n">center_window_on_screen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tabview</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkTabview</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Général&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;Général&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Général&quot;</span><span class="p">),</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack_propagate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">darkModeFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Général&quot;</span><span class="p">),</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span> <span class="o">=</span> <span class="n">height</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">_current_height</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack_propagate</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">config</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="p">()</span>
        <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">label0</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Algorithme génétique</span><span class="se">\n</span><span class="s2">---&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label0</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Moyenne :&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label1</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider1</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkSlider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">from_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">to</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">number_of_steps</span> <span class="o">=</span> <span class="mi">40</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider1</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label3</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Variance :&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label3</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label4</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">])</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label4</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider2</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkSlider</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">from_</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">to</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span> <span class="n">number_of_steps</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider2</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">]))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider2</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label5</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;---&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label5</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">imgMode</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;img&#39;</span><span class="p">,</span><span class="s1">&#39;mode.png&#39;</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imageMode</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkImage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">imgMode</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">imgMode</span><span class="p">,</span> <span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imgLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">darkModeFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">image</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageMode</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">imgLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">15</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;dark_mode&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;on&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">StringVar</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkSwitch</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">darkModeFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Dark mode&quot;</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_event</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
                                        <span class="n">variable</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span><span class="p">,</span> <span class="n">onvalue</span><span class="o">=</span><span class="s2">&quot;on&quot;</span><span class="p">,</span> <span class="n">offvalue</span><span class="o">=</span><span class="s2">&quot;off&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">defaultButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Réinitialiser&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">reset_config</span><span class="p">(</span><span class="n">config</span><span class="p">),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span> <span class="o">=</span> <span class="s1">&#39;firebrick3&#39;</span><span class="p">,</span> <span class="n">hover_color</span> <span class="o">=</span> <span class="s1">&#39;firebrick4&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">30</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">aboutButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">defaultFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;À propos&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">about</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">aboutButton</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">NButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Annuler&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancel_changes</span><span class="p">(</span><span class="n">config</span><span class="p">),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OKButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Valider&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_params</span><span class="p">(</span><span class="n">config</span><span class="p">),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OKButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pathIntroLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Chemin actuel&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pathIntroLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

        <span class="k">if</span> <span class="s1">&#39;saved_images_path&#39;</span> <span class="ow">in</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;saved_images_path&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">wraplength</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Changer le chemin&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_path_label</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathLabel</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Aucun chemin sélectionné&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathLabel</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Définir un chemin&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">200</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">change_path_label</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">NPathButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Annuler&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancel_changes</span><span class="p">(</span><span class="n">config</span><span class="p">),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">NPathButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OKPathButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">tab</span><span class="p">(</span><span class="s2">&quot;Images&quot;</span><span class="p">),</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Valider&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">25</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">validate_path_change</span><span class="p">(</span><span class="n">config</span> <span class="o">=</span> <span class="n">config</span><span class="p">,</span> <span class="n">label_string</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pathLabel</span><span class="o">.</span><span class="n">cget</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">)),</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">OKPathButton</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">padx</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">tabview</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">darkModeFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span> <span class="o">=</span> <span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">pady</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancel_changes</span><span class="p">(</span><span class="n">config</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">wait_visibility</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">grab_set</span><span class="p">()</span>
    
<div class="viewcode-block" id="Options.switch_event">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.switch_event">[docs]</a>
    <span class="k">def</span> <span class="nf">switch_event</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function changes the mode to light if it was dark, or dark if it was light.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;on&quot;</span><span class="p">):</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="s2">&quot;dark-blue&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">defaultButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span> <span class="o">=</span> <span class="s1">&#39;firebrick3&#39;</span><span class="p">,</span> <span class="n">hover_color</span> <span class="o">=</span> <span class="s1">&#39;firebrick4&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">focus</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;light&quot;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">defaultButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">fg_color</span> <span class="o">=</span> <span class="s1">&#39;firebrick2&#39;</span><span class="p">,</span> <span class="n">hover_color</span> <span class="o">=</span> <span class="s1">&#39;firebrick3&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">after</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">focus</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>


<div class="viewcode-block" id="Options.slider1">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.slider1">[docs]</a>
    <span class="k">def</span> <span class="nf">slider1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function changes the value showed above the mean slider according to where the cursor is.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: Value of the cursor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">value</span><span class="p">)</span></div>


<div class="viewcode-block" id="Options.slider2">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.slider2">[docs]</a>
    <span class="k">def</span> <span class="nf">slider2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function changes the value showed above the variance slider according to where the cursor is.</span>

<span class="sd">        Args:</span>
<span class="sd">            value: Value of the cursor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label4</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">value</span><span class="p">)</span></div>


<div class="viewcode-block" id="Options.cancel_changes">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.cancel_changes">[docs]</a>
    <span class="k">def</span> <span class="nf">cancel_changes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function cancels the changes that happened in the options menu when the user clicks on &quot;Annuler&quot; or closes the options window.</span>
<span class="sd">        It also closes the window and makes the main windows usable again.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: Configuration file used to come back to the previous values</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;dark_mode&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="s2">&quot;dark-blue&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;light&quot;</span><span class="p">)</span>
            <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="s2">&quot;blue&quot;</span><span class="p">)</span>
        
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]))</span>

        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;variance&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label4</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider2</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;current&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">]))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">grab_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="Options.validate_params">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.validate_params">[docs]</a>
    <span class="k">def</span> <span class="nf">validate_params</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function writes the parameters entered by the user in the config file, section [current], which validates them and uses them for the rest of the execution and the other executions.</span>
<span class="sd">        It also closes the window and makes the main windows usable again.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: Configuration file used to write the parameters</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;on&#39;</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;dark_mode&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;dark_mode&#39;</span><span class="p">,</span> <span class="s1">&#39;0&#39;</span><span class="p">)</span>
        
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">slider1</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;variance&#39;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">slider2</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">conf</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">grab_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="Options.reset_config">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.reset_config">[docs]</a>
    <span class="k">def</span> <span class="nf">reset_config</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function reinitializes the parameters to the very first ones, according to the [initial] section of the config.ini file.</span>
<span class="sd">        It also closes the window and makes the main windows usable again.</span>

<span class="sd">        Args:</span>
<span class="sd">            config: Configuration file used to read the initial parameters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;dark_mode&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">][</span><span class="s1">&#39;dark_mode&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">switch_var</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;on&#39;</span><span class="p">)</span>
        <span class="n">ctk</span><span class="o">.</span><span class="n">set_appearance_mode</span><span class="p">(</span><span class="s2">&quot;dark&quot;</span><span class="p">)</span>
        <span class="n">ctk</span><span class="o">.</span><span class="n">set_default_color_theme</span><span class="p">(</span><span class="s2">&quot;dark-blue&quot;</span><span class="p">)</span>

        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;mean&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label2</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider1</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">][</span><span class="s1">&#39;mean&#39;</span><span class="p">]))</span>

        <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;variance&#39;</span><span class="p">,</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">label4</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="n">config</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider2</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s1">&#39;initial&#39;</span><span class="p">][</span><span class="s1">&#39;variance&#39;</span><span class="p">]))</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">conf</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
        
        <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Felon Finder&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Paramètres réinitialisés.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">grab_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="Options.about">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.about">[docs]</a>
    <span class="k">def</span> <span class="nf">about</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function opens a pop-up message with the authors and specials thanks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showinfo</span><span class="p">(</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Felon Finder&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Felon Finder - 2024</span><span class="se">\n</span><span class="s2">Made with ❤️ by :</span><span class="se">\n\n</span><span class="s2">- LAYOUS Alexandre</span><span class="se">\n</span><span class="s2">- SALEK Chada</span><span class="se">\n</span><span class="s2">- ZARKUA Audrey</span><span class="se">\n\n</span><span class="s2">Special thanks to :</span><span class="se">\n\n</span><span class="s2">- PEIGNIER Sergio</span><span class="se">\n</span><span class="s2">- TROMBETTA Robin</span><span class="se">\n</span><span class="s2">- RIGOTTI Christophe&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Options.change_path_label">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.change_path_label">[docs]</a>
    <span class="k">def</span> <span class="nf">change_path_label</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function changes the path to the saved images if the user enters one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">given_path</span> <span class="o">=</span> <span class="n">filedialog</span><span class="o">.</span><span class="n">askdirectory</span><span class="p">(</span><span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Nouveau chemin d&#39;accès&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">given_path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathLabel</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">given_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">wraplength</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pathButton</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Changer le chemin&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Options.validate_path_change">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Options.validate_path_change">[docs]</a>
    <span class="k">def</span> <span class="nf">validate_path_change</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">label_string</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function validates the path changes by putting the new path in the config.ini file if one was selected.</span>
<span class="sd">        It also closes the window and makes the main windows usable again.</span>

<span class="sd">        Args:</span>
<span class="sd">            label_string: Value of the path string</span>
<span class="sd">            config: ConfigParser object used to write the new configuration</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">label_string</span> <span class="o">!=</span> <span class="s2">&quot;Aucun chemin sélectionné&quot;</span><span class="p">:</span>
            <span class="n">config</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;current&#39;</span><span class="p">,</span> <span class="s1">&#39;saved_images_path&#39;</span><span class="p">,</span> <span class="n">label_string</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)),</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">conf</span><span class="p">:</span>
                <span class="n">config</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">conf</span><span class="p">)</span>
            <span class="n">config</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">resource_path</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;cfg&#39;</span><span class="p">,</span><span class="s1">&#39;config.ini&#39;</span><span class="p">)))</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">grab_release</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>
</div>


<div class="viewcode-block" id="Tutorial">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Tutorial">[docs]</a>
<span class="k">class</span> <span class="nc">Tutorial</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This class contains the tutorial window with a link to the github repository of the project.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;Felon Finder - Mode d&#39;emploi&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">resizable</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">600</span> 
        <span class="n">height</span> <span class="o">=</span> <span class="mi">650</span>
        <span class="n">center_window_on_screen</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linkFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="n">width</span><span class="p">,</span> <span class="n">fg_color</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">_fg_color</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">labelTitle</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Felon Finder - Tutoriel&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">24</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelTitle</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">labelIntroTitle</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Introduction&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelIntroTitle</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelIntro</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Bienvenue dans le tutoriel de FELON FINDER !</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;Cette application a pour objectif de faciliter la reconnaissance</span><span class="se">\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;d&#39;un potentiel agresseur en produisant des portraits robots.&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelIntro</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">labelPrincipleTitle</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Principe&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelPrincipleTitle</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelPrinciple</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;En lançant FELON FINDER, quatre images aléatoirement choisies</span><span class="se">\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;de notre base de données sont proposées à l’utilisateur.</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;Ce dernier sélectionne les images les plus ressemblantes.</span><span class="se">\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;Il peut choisir une à quatre photos à chaque fois.</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;Les images sélectionnées sont ensuite traitées afin de produire quatre</span><span class="se">\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;nouveaux portraits robots se rapprochant de plus en plus de l’agresseur.</span><span class="se">\n\n</span><span class="s2">&quot;</span>
                                           <span class="s2">&quot;Si certains portraits conviennent à l&#39;utilisateur, il peut les enregistrer.&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelPrinciple</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">labelGuide</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Pour le guide complet et la f.a.q, cliquez ci-dessous :&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labelGuide</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linkFont</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkFont</span><span class="p">(</span><span class="s2">&quot;Helvetica&quot;</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkLabel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">linkFrame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;https://github.com/AlexandreLayous/felon-finder&quot;</span><span class="p">,</span> <span class="n">font</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">linkFont</span><span class="p">,</span> <span class="n">cursor</span> <span class="o">=</span> <span class="s2">&quot;hand2&quot;</span><span class="p">,</span> <span class="n">text_color</span><span class="o">=</span><span class="s2">&quot;blue2&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Enter&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">underline_and_darken_link</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Leave&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">cancel_link_underline</span><span class="p">())</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span><span class="s2">&quot;https://github.com/AlexandreLayous/felon-finder&quot;</span><span class="p">))</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">quitButton</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTkButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="p">,</span> <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;C&#39;est compris !&quot;</span><span class="p">,</span> <span class="n">width</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">close_window</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quitButton</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">topFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linkFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">bottomFrame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">pady</span> <span class="o">=</span> <span class="mi">20</span><span class="p">)</span>

<div class="viewcode-block" id="Tutorial.close_window">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Tutorial.close_window">[docs]</a>
    <span class="k">def</span> <span class="nf">close_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function closes the window.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>

    
<div class="viewcode-block" id="Tutorial.callback">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Tutorial.callback">[docs]</a>
    <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function opens a new tab in the user&#39;s web browser to the github repository of the project.</span>

<span class="sd">        Args:</span>
<span class="sd">            url: Link of the github repository</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">webbrowser</span><span class="o">.</span><span class="n">open_new_tab</span><span class="p">(</span><span class="n">url</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Tutorial.underline_and_darken_link">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Tutorial.underline_and_darken_link">[docs]</a>
    <span class="k">def</span> <span class="nf">underline_and_darken_link</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function underlines and darkens the link label when the user hovers over it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linkFont</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">underline</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text_color</span> <span class="o">=</span> <span class="s2">&quot;blue3&quot;</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="Tutorial.cancel_link_underline">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.Tutorial.cancel_link_underline">[docs]</a>
    <span class="k">def</span> <span class="nf">cancel_link_underline</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;This function removes the underlining and makes the link label a bit brighter when the user stops hovering over it.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">linkFont</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">underline</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">link</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text_color</span> <span class="o">=</span> <span class="s2">&quot;blue2&quot;</span><span class="p">)</span></div>
</div>


<div class="viewcode-block" id="create_root_closing_handler">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.create_root_closing_handler">[docs]</a>
<span class="k">def</span> <span class="nf">create_root_closing_handler</span><span class="p">(</span><span class="n">root</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function asks for the user&#39;s confirmation to close the program.</span>

<span class="sd">    Args:</span>
<span class="sd">        root: Main window of the program.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">on_closing</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">tk</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">askokcancel</span><span class="p">(</span><span class="s2">&quot;Fermeture&quot;</span><span class="p">,</span> <span class="s2">&quot;Vous allez fermer le programme. Continuer ?&quot;</span><span class="p">):</span>
            <span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">on_closing</span></div>


<div class="viewcode-block" id="center_window_on_screen">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.center_window_on_screen">[docs]</a>
<span class="k">def</span> <span class="nf">center_window_on_screen</span><span class="p">(</span><span class="n">window</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function centers the given window on the screen with the given width and height.</span>

<span class="sd">    Args:</span>
<span class="sd">        window: Window to be centered</span>
<span class="sd">        width: Width to be given to the window</span>
<span class="sd">        height: Height to be given to the window</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">window</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>

    <span class="n">screen_width</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span>
    <span class="n">screen_height</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span>
    
    <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">screen_width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="p">(</span><span class="n">screen_height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="n">window</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1">x</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">+</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span></div>


<div class="viewcode-block" id="main">
<a class="viewcode-back" href="../FelonFinder.html#FelonFinder.main">[docs]</a>
<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function launches the loading splash screen for the program.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">splash_screen</span> <span class="o">=</span> <span class="n">ctk</span><span class="o">.</span><span class="n">CTk</span><span class="p">()</span>
    <span class="n">SplashScreen</span><span class="p">(</span><span class="n">splash_screen</span><span class="p">)</span>
    <span class="n">splash_screen</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Alexandre Layous, Chada Salek and Audrey Zarkua.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>